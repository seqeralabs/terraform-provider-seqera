overlay: 1.0.0
x-speakeasy-jsonpath: rfc9535
info:
  title: Custom validators overlays for Seqera API
  version: 0.0.0
actions:
  ####################################################################
  ####                  Label Name Validation                    ####
  ####################################################################
  # Add custom validator for label names
  # Label name must contain a minimum of 1 and a maximum of 39 alphanumeric
  # characters separated by dashes or underscores
  - target: $.components.schemas.CreateLabelRequest.properties.name
    update:
      minLength: 1
      maxLength: 39
      title: "Label Name"
      description: "Label name must contain a minimum of 1 and a maximum of 39 alphanumeric characters separated by dashes or underscores"
      example: "my-label"
      x-speakeasy-plan-validators: LabelNameValidator

  ####################################################################
  ####                  Label Value Validation                   ####
  ####################################################################
  # Add custom validator for label values
  # Label value must contain a minimum of 1 and a maximum of 39 alphanumeric
  # characters separated by dashes or underscores
  - target: $.components.schemas.CreateLabelRequest.properties.value
    update:
      minLength: 1
      maxLength: 39
      title: "Label Value"
      description: "Label value must contain a minimum of 1 and a maximum of 39 alphanumeric characters separated by dashes or underscores"
      example: "production"
      x-speakeasy-plan-validators: LabelValueValidator

  # Add validators to UpdateLabelRequest as well
  - target: $.components.schemas.UpdateLabelRequest.properties.name
    update:
      minLength: 1
      maxLength: 39
      title: "Label Name"
      description: "Label name must contain a minimum of 1 and a maximum of 39 alphanumeric characters separated by dashes or underscores"
      example: "my-label"
      x-speakeasy-plan-validators: LabelNameValidator

  - target: $.components.schemas.UpdateLabelRequest.properties.value
    update:
      minLength: 1
      maxLength: 39
      title: "Label Value"
      description: "Label value must contain a minimum of 1 and a maximum of 39 alphanumeric characters separated by dashes or underscores"
      example: "production"
      x-speakeasy-plan-validators: LabelValueValidator

  ####################################################################
  ####              Azure Batch Work Directory Validation        ####
  ####################################################################
  # Add custom validator for Azure Batch work directory
  # Must be a valid Azure Blob container URL with az:// prefix
  - target: $.components.schemas.AzBatchConfig.properties.workDir
    update:
      title: "Azure Batch Work Directory"
      description: "Must be a valid Azure Blob container URL with format az://container-name/path"
      example: "az://my-container/work"
      x-speakeasy-plan-validators: AzureBatchWorkDirValidator

  ####################################################################
  ####                Pipeline Name Validation                   ####
  ####################################################################
  # Add custom validator for pipeline names
  # Pipeline name must contain a minimum of 2 and a maximum of 99 alphanumeric
  # characters separated by dashes, dots or underscores
  - target: $.components.schemas.PipelineCreateRequest.properties.name
    update:
      title: "Pipeline Name"
      description: "Pipeline name must contain a minimum of 2 and a maximum of 99 alphanumeric characters separated by dashes, dots or underscores"
      example: "my-pipeline"
      x-speakeasy-plan-validators: PipelineNameValidator

  # Add validator to UpdatePipelineRequest as well
  - target: $.components.schemas.UpdatePipelineRequest.properties.name
    update:
      title: "Pipeline Name"
      description: "Pipeline name must contain a minimum of 2 and a maximum of 99 alphanumeric characters separated by dashes, dots or underscores"
      example: "my-pipeline"
      x-speakeasy-plan-validators: PipelineNameValidator
