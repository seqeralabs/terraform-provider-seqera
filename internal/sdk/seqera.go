// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package sdk

// Generated from OpenAPI doc version 1.102.0 and generator version 2.801.2

import (
	"context"
	"fmt"
	"github.com/seqeralabs/terraform-provider-seqera/internal/sdk/internal/config"
	"github.com/seqeralabs/terraform-provider-seqera/internal/sdk/internal/hooks"
	"github.com/seqeralabs/terraform-provider-seqera/internal/sdk/internal/utils"
	"github.com/seqeralabs/terraform-provider-seqera/internal/sdk/models/shared"
	"github.com/seqeralabs/terraform-provider-seqera/internal/sdk/retry"
	"net/http"
	"time"
)

// ServerList contains the list of servers available to the SDK
var ServerList = []string{
	"https://api.cloud.seqera.io",
}

// HTTPClient provides an interface for supplying the SDK with a custom HTTP client
type HTTPClient interface {
	Do(req *http.Request) (*http.Response, error)
}

// String provides a helper function to return a pointer to a string
func String(s string) *string { return &s }

// Bool provides a helper function to return a pointer to a bool
func Bool(b bool) *bool { return &b }

// Int provides a helper function to return a pointer to an int
func Int(i int) *int { return &i }

// Int64 provides a helper function to return a pointer to an int64
func Int64(i int64) *int64 { return &i }

// Float32 provides a helper function to return a pointer to a float32
func Float32(f float32) *float32 { return &f }

// Float64 provides a helper function to return a pointer to a float64
func Float64(f float64) *float64 { return &f }

// Pointer provides a helper function to return a pointer to a type
func Pointer[T any](v T) *T { return &v }

// Seqera API: The Seqera Platform Terraform Provider enables infrastructure-as-code management of Seqera Platform resources. This provider allows you to programmatically create, configure, and manage organizations, workspaces, compute environments, pipelines, credentials, and other Seqera Platform components using Terraform.
type Seqera struct {
	SDKVersion string
	// Pipeline actions
	Actions *Actions
	// Labels and resource labels
	Labels *Labels
	// Avatars
	Avatars *Avatars
	// Compute environments
	ComputeEnvs *ComputeEnvs
	// Credentials
	Credentials *Credentials
	// Cloud storage directory paths in Data Explorer
	DataLinks *DataLinks
	// Pipeline input datasets (samplesheets) in CSV or TSV format
	Datasets *Datasets
	// GA4GH workflow execution service runs
	Ga4gh      *Ga4gh
	Identities *Identities
	// Workflow launch events
	Launch *Launch
	// Organizations
	Orgs *Orgs
	// Teams in an organization context
	Teams *Teams
	// Workspaces in an organization context
	Workspaces *Workspaces
	// Pipeline secrets in a user or workspace context
	PipelineSecrets *PipelineSecrets
	// Pipelines
	Pipelines *Pipelines
	// Computing platforms
	Platforms *Platforms
	// Seqera Platform API service information
	ServiceInfo *ServiceInfo
	// Studios and Studio sessions
	Studios *Studios
	// API access tokens
	Tokens *Tokens
	// Workflow execution traces
	Trace *Trace
	// Users
	Users *Users
	// Workflow executions
	Workflows    *Workflows
	WorkflowStar *WorkflowStar

	sdkConfiguration config.SDKConfiguration
	hooks            *hooks.Hooks
}

type SDKOption func(*Seqera)

// WithServerURL allows the overriding of the default server URL
func WithServerURL(serverURL string) SDKOption {
	return func(sdk *Seqera) {
		sdk.sdkConfiguration.ServerURL = serverURL
	}
}

// WithTemplatedServerURL allows the overriding of the default server URL with a templated URL populated with the provided parameters
func WithTemplatedServerURL(serverURL string, params map[string]string) SDKOption {
	return func(sdk *Seqera) {
		if params != nil {
			serverURL = utils.ReplaceParameters(serverURL, params)
		}

		sdk.sdkConfiguration.ServerURL = serverURL
	}
}

// WithServerIndex allows the overriding of the default server by index
func WithServerIndex(serverIndex int) SDKOption {
	return func(sdk *Seqera) {
		if serverIndex < 0 || serverIndex >= len(ServerList) {
			panic(fmt.Errorf("server index %d out of range", serverIndex))
		}

		sdk.sdkConfiguration.ServerIndex = serverIndex
	}
}

// WithClient allows the overriding of the default HTTP client used by the SDK
func WithClient(client HTTPClient) SDKOption {
	return func(sdk *Seqera) {
		sdk.sdkConfiguration.Client = client
	}
}

// WithSecurity configures the SDK to use the provided security details
func WithSecurity(security shared.Security) SDKOption {
	return func(sdk *Seqera) {
		sdk.sdkConfiguration.Security = utils.AsSecuritySource(security)
	}
}

// WithSecuritySource configures the SDK to invoke the Security Source function on each method call to determine authentication
func WithSecuritySource(security func(context.Context) (shared.Security, error)) SDKOption {
	return func(sdk *Seqera) {
		sdk.sdkConfiguration.Security = func(ctx context.Context) (interface{}, error) {
			return security(ctx)
		}
	}
}

func WithRetryConfig(retryConfig retry.Config) SDKOption {
	return func(sdk *Seqera) {
		sdk.sdkConfiguration.RetryConfig = &retryConfig
	}
}

// WithTimeout Optional request timeout applied to each operation
func WithTimeout(timeout time.Duration) SDKOption {
	return func(sdk *Seqera) {
		sdk.sdkConfiguration.Timeout = &timeout
	}
}

// New creates a new instance of the SDK with the provided options
func New(opts ...SDKOption) *Seqera {
	sdk := &Seqera{
		SDKVersion: "0.30.2",
		sdkConfiguration: config.SDKConfiguration{
			UserAgent:  "speakeasy-sdk/terraform 0.30.2 2.801.2 1.102.0 github.com/seqeralabs/terraform-provider-seqera/internal/sdk",
			ServerList: ServerList,
		},
		hooks: hooks.New(),
	}
	for _, opt := range opts {
		opt(sdk)
	}

	// Use WithClient to override the default client if you would like to customize the timeout
	if sdk.sdkConfiguration.Client == nil {
		sdk.sdkConfiguration.Client = &http.Client{Timeout: 60 * time.Second}
	}

	currentServerURL, _ := sdk.sdkConfiguration.GetServerDetails()
	serverURL := currentServerURL
	serverURL, sdk.sdkConfiguration.Client = sdk.hooks.SDKInit(currentServerURL, sdk.sdkConfiguration.Client)
	if currentServerURL != serverURL {
		sdk.sdkConfiguration.ServerURL = serverURL
	}

	sdk.Actions = newActions(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Labels = newLabels(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Avatars = newAvatars(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.ComputeEnvs = newComputeEnvs(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Credentials = newCredentials(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.DataLinks = newDataLinks(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Datasets = newDatasets(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Ga4gh = newGa4gh(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Identities = newIdentities(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Launch = newLaunch(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Orgs = newOrgs(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Teams = newTeams(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Workspaces = newWorkspaces(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.PipelineSecrets = newPipelineSecrets(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Pipelines = newPipelines(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Platforms = newPlatforms(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.ServiceInfo = newServiceInfo(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Studios = newStudios(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Tokens = newTokens(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Trace = newTrace(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Users = newUsers(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.Workflows = newWorkflows(sdk, sdk.sdkConfiguration, sdk.hooks)
	sdk.WorkflowStar = newWorkflowStar(sdk, sdk.sdkConfiguration, sdk.hooks)

	return sdk
}
