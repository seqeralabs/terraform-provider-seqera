// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"errors"
	"fmt"
	"github.com/seqeralabs/terraform-provider-seqera/internal/sdk/internal/utils"
)

type PlatformMetainfoUnionType string

const (
	PlatformMetainfoUnionTypeGkePlatform   PlatformMetainfoUnionType = "gke-platform"
	PlatformMetainfoUnionTypeAwsCloud      PlatformMetainfoUnionType = "aws-cloud"
	PlatformMetainfoUnionTypeK8sPlatform   PlatformMetainfoUnionType = "k8s-platform"
	PlatformMetainfoUnionTypeGrid          PlatformMetainfoUnionType = "grid"
	PlatformMetainfoUnionTypeAwsBatch      PlatformMetainfoUnionType = "aws-batch"
	PlatformMetainfoUnionTypeLocalPlatform PlatformMetainfoUnionType = "local-platform"
	PlatformMetainfoUnionTypeGoogle        PlatformMetainfoUnionType = "google"
	PlatformMetainfoUnionTypeAzureBatch    PlatformMetainfoUnionType = "azure-batch"
	PlatformMetainfoUnionTypeEksPlatform   PlatformMetainfoUnionType = "eks-platform"
)

type PlatformMetainfoUnion struct {
	AwsBatchPlatformMetainfo *AwsBatchPlatformMetainfo `queryParam:"inline,name=PlatformMetainfoUnion" union:"member"`
	AwsCloudPlatformMetainfo *AwsCloudPlatformMetainfo `queryParam:"inline,name=PlatformMetainfoUnion" union:"member"`
	GooglePlatformMetainfo   *GooglePlatformMetainfo   `queryParam:"inline,name=PlatformMetainfoUnion" union:"member"`
	AzBatchPlatformMetainfo  *AzBatchPlatformMetainfo  `queryParam:"inline,name=PlatformMetainfoUnion" union:"member"`
	EksPlatformMetaInfo      *EksPlatformMetaInfo      `queryParam:"inline,name=PlatformMetainfoUnion" union:"member"`
	GkePlatformMetaInfo      *GkePlatformMetaInfo      `queryParam:"inline,name=PlatformMetainfoUnion" union:"member"`
	K8sPlatformMetaInfo      *K8sPlatformMetaInfo      `queryParam:"inline,name=PlatformMetainfoUnion" union:"member"`
	GridPlatformMetainfo     *GridPlatformMetainfo     `queryParam:"inline,name=PlatformMetainfoUnion" union:"member"`
	LocalPlatformMetainfo    *LocalPlatformMetainfo    `queryParam:"inline,name=PlatformMetainfoUnion" union:"member"`

	Type PlatformMetainfoUnionType
}

func CreatePlatformMetainfoUnionGkePlatform(gkePlatform GkePlatformMetaInfo) PlatformMetainfoUnion {
	typ := PlatformMetainfoUnionTypeGkePlatform

	typStr := string(typ)
	gkePlatform.PlatformType = typStr

	return PlatformMetainfoUnion{
		GkePlatformMetaInfo: &gkePlatform,
		Type:                typ,
	}
}

func CreatePlatformMetainfoUnionAwsCloud(awsCloud AwsCloudPlatformMetainfo) PlatformMetainfoUnion {
	typ := PlatformMetainfoUnionTypeAwsCloud

	typStr := string(typ)
	awsCloud.PlatformType = typStr

	return PlatformMetainfoUnion{
		AwsCloudPlatformMetainfo: &awsCloud,
		Type:                     typ,
	}
}

func CreatePlatformMetainfoUnionK8sPlatform(k8sPlatform K8sPlatformMetaInfo) PlatformMetainfoUnion {
	typ := PlatformMetainfoUnionTypeK8sPlatform

	typStr := string(typ)
	k8sPlatform.PlatformType = typStr

	return PlatformMetainfoUnion{
		K8sPlatformMetaInfo: &k8sPlatform,
		Type:                typ,
	}
}

func CreatePlatformMetainfoUnionGrid(grid GridPlatformMetainfo) PlatformMetainfoUnion {
	typ := PlatformMetainfoUnionTypeGrid

	typStr := string(typ)
	grid.PlatformType = typStr

	return PlatformMetainfoUnion{
		GridPlatformMetainfo: &grid,
		Type:                 typ,
	}
}

func CreatePlatformMetainfoUnionAwsBatch(awsBatch AwsBatchPlatformMetainfo) PlatformMetainfoUnion {
	typ := PlatformMetainfoUnionTypeAwsBatch

	typStr := string(typ)
	awsBatch.PlatformType = typStr

	return PlatformMetainfoUnion{
		AwsBatchPlatformMetainfo: &awsBatch,
		Type:                     typ,
	}
}

func CreatePlatformMetainfoUnionLocalPlatform(localPlatform LocalPlatformMetainfo) PlatformMetainfoUnion {
	typ := PlatformMetainfoUnionTypeLocalPlatform

	typStr := string(typ)
	localPlatform.PlatformType = typStr

	return PlatformMetainfoUnion{
		LocalPlatformMetainfo: &localPlatform,
		Type:                  typ,
	}
}

func CreatePlatformMetainfoUnionGoogle(google GooglePlatformMetainfo) PlatformMetainfoUnion {
	typ := PlatformMetainfoUnionTypeGoogle

	typStr := string(typ)
	google.PlatformType = typStr

	return PlatformMetainfoUnion{
		GooglePlatformMetainfo: &google,
		Type:                   typ,
	}
}

func CreatePlatformMetainfoUnionAzureBatch(azureBatch AzBatchPlatformMetainfo) PlatformMetainfoUnion {
	typ := PlatformMetainfoUnionTypeAzureBatch

	typStr := string(typ)
	azureBatch.PlatformType = typStr

	return PlatformMetainfoUnion{
		AzBatchPlatformMetainfo: &azureBatch,
		Type:                    typ,
	}
}

func CreatePlatformMetainfoUnionEksPlatform(eksPlatform EksPlatformMetaInfo) PlatformMetainfoUnion {
	typ := PlatformMetainfoUnionTypeEksPlatform

	typStr := string(typ)
	eksPlatform.PlatformType = typStr

	return PlatformMetainfoUnion{
		EksPlatformMetaInfo: &eksPlatform,
		Type:                typ,
	}
}

func (u *PlatformMetainfoUnion) UnmarshalJSON(data []byte) error {

	type discriminator struct {
		PlatformType string `json:"platformType"`
	}

	dis := new(discriminator)
	if err := json.Unmarshal(data, &dis); err != nil {
		return fmt.Errorf("could not unmarshal discriminator: %w", err)
	}

	switch dis.PlatformType {
	case "gke-platform":
		gkePlatformMetaInfo := new(GkePlatformMetaInfo)
		if err := utils.UnmarshalJSON(data, &gkePlatformMetaInfo, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (PlatformType == gke-platform) type GkePlatformMetaInfo within PlatformMetainfoUnion: %w", string(data), err)
		}

		u.GkePlatformMetaInfo = gkePlatformMetaInfo
		u.Type = PlatformMetainfoUnionTypeGkePlatform
		return nil
	case "aws-cloud":
		awsCloudPlatformMetainfo := new(AwsCloudPlatformMetainfo)
		if err := utils.UnmarshalJSON(data, &awsCloudPlatformMetainfo, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (PlatformType == aws-cloud) type AwsCloudPlatformMetainfo within PlatformMetainfoUnion: %w", string(data), err)
		}

		u.AwsCloudPlatformMetainfo = awsCloudPlatformMetainfo
		u.Type = PlatformMetainfoUnionTypeAwsCloud
		return nil
	case "k8s-platform":
		k8sPlatformMetaInfo := new(K8sPlatformMetaInfo)
		if err := utils.UnmarshalJSON(data, &k8sPlatformMetaInfo, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (PlatformType == k8s-platform) type K8sPlatformMetaInfo within PlatformMetainfoUnion: %w", string(data), err)
		}

		u.K8sPlatformMetaInfo = k8sPlatformMetaInfo
		u.Type = PlatformMetainfoUnionTypeK8sPlatform
		return nil
	case "grid":
		gridPlatformMetainfo := new(GridPlatformMetainfo)
		if err := utils.UnmarshalJSON(data, &gridPlatformMetainfo, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (PlatformType == grid) type GridPlatformMetainfo within PlatformMetainfoUnion: %w", string(data), err)
		}

		u.GridPlatformMetainfo = gridPlatformMetainfo
		u.Type = PlatformMetainfoUnionTypeGrid
		return nil
	case "aws-batch":
		awsBatchPlatformMetainfo := new(AwsBatchPlatformMetainfo)
		if err := utils.UnmarshalJSON(data, &awsBatchPlatformMetainfo, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (PlatformType == aws-batch) type AwsBatchPlatformMetainfo within PlatformMetainfoUnion: %w", string(data), err)
		}

		u.AwsBatchPlatformMetainfo = awsBatchPlatformMetainfo
		u.Type = PlatformMetainfoUnionTypeAwsBatch
		return nil
	case "local-platform":
		localPlatformMetainfo := new(LocalPlatformMetainfo)
		if err := utils.UnmarshalJSON(data, &localPlatformMetainfo, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (PlatformType == local-platform) type LocalPlatformMetainfo within PlatformMetainfoUnion: %w", string(data), err)
		}

		u.LocalPlatformMetainfo = localPlatformMetainfo
		u.Type = PlatformMetainfoUnionTypeLocalPlatform
		return nil
	case "google":
		googlePlatformMetainfo := new(GooglePlatformMetainfo)
		if err := utils.UnmarshalJSON(data, &googlePlatformMetainfo, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (PlatformType == google) type GooglePlatformMetainfo within PlatformMetainfoUnion: %w", string(data), err)
		}

		u.GooglePlatformMetainfo = googlePlatformMetainfo
		u.Type = PlatformMetainfoUnionTypeGoogle
		return nil
	case "azure-batch":
		azBatchPlatformMetainfo := new(AzBatchPlatformMetainfo)
		if err := utils.UnmarshalJSON(data, &azBatchPlatformMetainfo, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (PlatformType == azure-batch) type AzBatchPlatformMetainfo within PlatformMetainfoUnion: %w", string(data), err)
		}

		u.AzBatchPlatformMetainfo = azBatchPlatformMetainfo
		u.Type = PlatformMetainfoUnionTypeAzureBatch
		return nil
	case "eks-platform":
		eksPlatformMetaInfo := new(EksPlatformMetaInfo)
		if err := utils.UnmarshalJSON(data, &eksPlatformMetaInfo, "", true, nil); err != nil {
			return fmt.Errorf("could not unmarshal `%s` into expected (PlatformType == eks-platform) type EksPlatformMetaInfo within PlatformMetainfoUnion: %w", string(data), err)
		}

		u.EksPlatformMetaInfo = eksPlatformMetaInfo
		u.Type = PlatformMetainfoUnionTypeEksPlatform
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for PlatformMetainfoUnion", string(data))
}

func (u PlatformMetainfoUnion) MarshalJSON() ([]byte, error) {
	if u.AwsBatchPlatformMetainfo != nil {
		return utils.MarshalJSON(u.AwsBatchPlatformMetainfo, "", true)
	}

	if u.AwsCloudPlatformMetainfo != nil {
		return utils.MarshalJSON(u.AwsCloudPlatformMetainfo, "", true)
	}

	if u.GooglePlatformMetainfo != nil {
		return utils.MarshalJSON(u.GooglePlatformMetainfo, "", true)
	}

	if u.AzBatchPlatformMetainfo != nil {
		return utils.MarshalJSON(u.AzBatchPlatformMetainfo, "", true)
	}

	if u.EksPlatformMetaInfo != nil {
		return utils.MarshalJSON(u.EksPlatformMetaInfo, "", true)
	}

	if u.GkePlatformMetaInfo != nil {
		return utils.MarshalJSON(u.GkePlatformMetaInfo, "", true)
	}

	if u.K8sPlatformMetaInfo != nil {
		return utils.MarshalJSON(u.K8sPlatformMetaInfo, "", true)
	}

	if u.GridPlatformMetainfo != nil {
		return utils.MarshalJSON(u.GridPlatformMetainfo, "", true)
	}

	if u.LocalPlatformMetainfo != nil {
		return utils.MarshalJSON(u.LocalPlatformMetainfo, "", true)
	}

	return nil, errors.New("could not marshal union type PlatformMetainfoUnion: all fields are null")
}
