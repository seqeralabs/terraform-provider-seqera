// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package shared

import (
	"errors"
	"fmt"
	"github.com/seqeralabs/terraform-provider-seqera/internal/sdk/internal/utils"
)

type PlatformMetainfoType string

const (
	PlatformMetainfoTypeAwsBatchPlatformMetainfo PlatformMetainfoType = "AwsBatchPlatformMetainfo"
	PlatformMetainfoTypeAwsCloudPlatformMetainfo PlatformMetainfoType = "AwsCloudPlatformMetainfo"
	PlatformMetainfoTypeGooglePlatformMetainfo   PlatformMetainfoType = "GooglePlatformMetainfo"
	PlatformMetainfoTypeAzBatchPlatformMetainfo  PlatformMetainfoType = "AzBatchPlatformMetainfo"
	PlatformMetainfoTypeEksPlatformMetaInfo      PlatformMetainfoType = "EksPlatformMetaInfo"
	PlatformMetainfoTypeGkePlatformMetaInfo      PlatformMetainfoType = "GkePlatformMetaInfo"
	PlatformMetainfoTypeK8sPlatformMetaInfo      PlatformMetainfoType = "K8sPlatformMetaInfo"
	PlatformMetainfoTypeGridPlatformMetainfo     PlatformMetainfoType = "GridPlatformMetainfo"
	PlatformMetainfoTypeLocalPlatformMetainfo    PlatformMetainfoType = "LocalPlatformMetainfo"
)

type PlatformMetainfo struct {
	AwsBatchPlatformMetainfo *AwsBatchPlatformMetainfo `queryParam:"inline" union:"member"`
	AwsCloudPlatformMetainfo *AwsCloudPlatformMetainfo `queryParam:"inline" union:"member"`
	GooglePlatformMetainfo   *GooglePlatformMetainfo   `queryParam:"inline" union:"member"`
	AzBatchPlatformMetainfo  *AzBatchPlatformMetainfo  `queryParam:"inline" union:"member"`
	EksPlatformMetaInfo      *EksPlatformMetaInfo      `queryParam:"inline" union:"member"`
	GkePlatformMetaInfo      *GkePlatformMetaInfo      `queryParam:"inline" union:"member"`
	K8sPlatformMetaInfo      *K8sPlatformMetaInfo      `queryParam:"inline" union:"member"`
	GridPlatformMetainfo     *GridPlatformMetainfo     `queryParam:"inline" union:"member"`
	LocalPlatformMetainfo    *LocalPlatformMetainfo    `queryParam:"inline" union:"member"`

	Type PlatformMetainfoType
}

func CreatePlatformMetainfoAwsBatchPlatformMetainfo(awsBatchPlatformMetainfo AwsBatchPlatformMetainfo) PlatformMetainfo {
	typ := PlatformMetainfoTypeAwsBatchPlatformMetainfo

	return PlatformMetainfo{
		AwsBatchPlatformMetainfo: &awsBatchPlatformMetainfo,
		Type:                     typ,
	}
}

func CreatePlatformMetainfoAwsCloudPlatformMetainfo(awsCloudPlatformMetainfo AwsCloudPlatformMetainfo) PlatformMetainfo {
	typ := PlatformMetainfoTypeAwsCloudPlatformMetainfo

	return PlatformMetainfo{
		AwsCloudPlatformMetainfo: &awsCloudPlatformMetainfo,
		Type:                     typ,
	}
}

func CreatePlatformMetainfoGooglePlatformMetainfo(googlePlatformMetainfo GooglePlatformMetainfo) PlatformMetainfo {
	typ := PlatformMetainfoTypeGooglePlatformMetainfo

	return PlatformMetainfo{
		GooglePlatformMetainfo: &googlePlatformMetainfo,
		Type:                   typ,
	}
}

func CreatePlatformMetainfoAzBatchPlatformMetainfo(azBatchPlatformMetainfo AzBatchPlatformMetainfo) PlatformMetainfo {
	typ := PlatformMetainfoTypeAzBatchPlatformMetainfo

	return PlatformMetainfo{
		AzBatchPlatformMetainfo: &azBatchPlatformMetainfo,
		Type:                    typ,
	}
}

func CreatePlatformMetainfoEksPlatformMetaInfo(eksPlatformMetaInfo EksPlatformMetaInfo) PlatformMetainfo {
	typ := PlatformMetainfoTypeEksPlatformMetaInfo

	return PlatformMetainfo{
		EksPlatformMetaInfo: &eksPlatformMetaInfo,
		Type:                typ,
	}
}

func CreatePlatformMetainfoGkePlatformMetaInfo(gkePlatformMetaInfo GkePlatformMetaInfo) PlatformMetainfo {
	typ := PlatformMetainfoTypeGkePlatformMetaInfo

	return PlatformMetainfo{
		GkePlatformMetaInfo: &gkePlatformMetaInfo,
		Type:                typ,
	}
}

func CreatePlatformMetainfoK8sPlatformMetaInfo(k8sPlatformMetaInfo K8sPlatformMetaInfo) PlatformMetainfo {
	typ := PlatformMetainfoTypeK8sPlatformMetaInfo

	return PlatformMetainfo{
		K8sPlatformMetaInfo: &k8sPlatformMetaInfo,
		Type:                typ,
	}
}

func CreatePlatformMetainfoGridPlatformMetainfo(gridPlatformMetainfo GridPlatformMetainfo) PlatformMetainfo {
	typ := PlatformMetainfoTypeGridPlatformMetainfo

	return PlatformMetainfo{
		GridPlatformMetainfo: &gridPlatformMetainfo,
		Type:                 typ,
	}
}

func CreatePlatformMetainfoLocalPlatformMetainfo(localPlatformMetainfo LocalPlatformMetainfo) PlatformMetainfo {
	typ := PlatformMetainfoTypeLocalPlatformMetainfo

	return PlatformMetainfo{
		LocalPlatformMetainfo: &localPlatformMetainfo,
		Type:                  typ,
	}
}

func (u *PlatformMetainfo) UnmarshalJSON(data []byte) error {

	var candidates []utils.UnionCandidate

	// Collect all valid candidates
	var awsBatchPlatformMetainfo AwsBatchPlatformMetainfo = AwsBatchPlatformMetainfo{}
	if err := utils.UnmarshalJSON(data, &awsBatchPlatformMetainfo, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  PlatformMetainfoTypeAwsBatchPlatformMetainfo,
			Value: &awsBatchPlatformMetainfo,
		})
	}

	var awsCloudPlatformMetainfo AwsCloudPlatformMetainfo = AwsCloudPlatformMetainfo{}
	if err := utils.UnmarshalJSON(data, &awsCloudPlatformMetainfo, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  PlatformMetainfoTypeAwsCloudPlatformMetainfo,
			Value: &awsCloudPlatformMetainfo,
		})
	}

	var googlePlatformMetainfo GooglePlatformMetainfo = GooglePlatformMetainfo{}
	if err := utils.UnmarshalJSON(data, &googlePlatformMetainfo, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  PlatformMetainfoTypeGooglePlatformMetainfo,
			Value: &googlePlatformMetainfo,
		})
	}

	var azBatchPlatformMetainfo AzBatchPlatformMetainfo = AzBatchPlatformMetainfo{}
	if err := utils.UnmarshalJSON(data, &azBatchPlatformMetainfo, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  PlatformMetainfoTypeAzBatchPlatformMetainfo,
			Value: &azBatchPlatformMetainfo,
		})
	}

	var eksPlatformMetaInfo EksPlatformMetaInfo = EksPlatformMetaInfo{}
	if err := utils.UnmarshalJSON(data, &eksPlatformMetaInfo, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  PlatformMetainfoTypeEksPlatformMetaInfo,
			Value: &eksPlatformMetaInfo,
		})
	}

	var gkePlatformMetaInfo GkePlatformMetaInfo = GkePlatformMetaInfo{}
	if err := utils.UnmarshalJSON(data, &gkePlatformMetaInfo, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  PlatformMetainfoTypeGkePlatformMetaInfo,
			Value: &gkePlatformMetaInfo,
		})
	}

	var k8sPlatformMetaInfo K8sPlatformMetaInfo = K8sPlatformMetaInfo{}
	if err := utils.UnmarshalJSON(data, &k8sPlatformMetaInfo, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  PlatformMetainfoTypeK8sPlatformMetaInfo,
			Value: &k8sPlatformMetaInfo,
		})
	}

	var gridPlatformMetainfo GridPlatformMetainfo = GridPlatformMetainfo{}
	if err := utils.UnmarshalJSON(data, &gridPlatformMetainfo, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  PlatformMetainfoTypeGridPlatformMetainfo,
			Value: &gridPlatformMetainfo,
		})
	}

	var localPlatformMetainfo LocalPlatformMetainfo = LocalPlatformMetainfo{}
	if err := utils.UnmarshalJSON(data, &localPlatformMetainfo, "", true, nil); err == nil {
		candidates = append(candidates, utils.UnionCandidate{
			Type:  PlatformMetainfoTypeLocalPlatformMetainfo,
			Value: &localPlatformMetainfo,
		})
	}

	if len(candidates) == 0 {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for PlatformMetainfo", string(data))
	}

	// Pick the best candidate using multi-stage filtering
	best := utils.PickBestUnionCandidate(candidates, data)
	if best == nil {
		return fmt.Errorf("could not unmarshal `%s` into any supported union types for PlatformMetainfo", string(data))
	}

	// Set the union type and value based on the best candidate
	u.Type = best.Type.(PlatformMetainfoType)
	switch best.Type {
	case PlatformMetainfoTypeAwsBatchPlatformMetainfo:
		u.AwsBatchPlatformMetainfo = best.Value.(*AwsBatchPlatformMetainfo)
		return nil
	case PlatformMetainfoTypeAwsCloudPlatformMetainfo:
		u.AwsCloudPlatformMetainfo = best.Value.(*AwsCloudPlatformMetainfo)
		return nil
	case PlatformMetainfoTypeGooglePlatformMetainfo:
		u.GooglePlatformMetainfo = best.Value.(*GooglePlatformMetainfo)
		return nil
	case PlatformMetainfoTypeAzBatchPlatformMetainfo:
		u.AzBatchPlatformMetainfo = best.Value.(*AzBatchPlatformMetainfo)
		return nil
	case PlatformMetainfoTypeEksPlatformMetaInfo:
		u.EksPlatformMetaInfo = best.Value.(*EksPlatformMetaInfo)
		return nil
	case PlatformMetainfoTypeGkePlatformMetaInfo:
		u.GkePlatformMetaInfo = best.Value.(*GkePlatformMetaInfo)
		return nil
	case PlatformMetainfoTypeK8sPlatformMetaInfo:
		u.K8sPlatformMetaInfo = best.Value.(*K8sPlatformMetaInfo)
		return nil
	case PlatformMetainfoTypeGridPlatformMetainfo:
		u.GridPlatformMetainfo = best.Value.(*GridPlatformMetainfo)
		return nil
	case PlatformMetainfoTypeLocalPlatformMetainfo:
		u.LocalPlatformMetainfo = best.Value.(*LocalPlatformMetainfo)
		return nil
	}

	return fmt.Errorf("could not unmarshal `%s` into any supported union types for PlatformMetainfo", string(data))
}

func (u PlatformMetainfo) MarshalJSON() ([]byte, error) {
	if u.AwsBatchPlatformMetainfo != nil {
		return utils.MarshalJSON(u.AwsBatchPlatformMetainfo, "", true)
	}

	if u.AwsCloudPlatformMetainfo != nil {
		return utils.MarshalJSON(u.AwsCloudPlatformMetainfo, "", true)
	}

	if u.GooglePlatformMetainfo != nil {
		return utils.MarshalJSON(u.GooglePlatformMetainfo, "", true)
	}

	if u.AzBatchPlatformMetainfo != nil {
		return utils.MarshalJSON(u.AzBatchPlatformMetainfo, "", true)
	}

	if u.EksPlatformMetaInfo != nil {
		return utils.MarshalJSON(u.EksPlatformMetaInfo, "", true)
	}

	if u.GkePlatformMetaInfo != nil {
		return utils.MarshalJSON(u.GkePlatformMetaInfo, "", true)
	}

	if u.K8sPlatformMetaInfo != nil {
		return utils.MarshalJSON(u.K8sPlatformMetaInfo, "", true)
	}

	if u.GridPlatformMetainfo != nil {
		return utils.MarshalJSON(u.GridPlatformMetainfo, "", true)
	}

	if u.LocalPlatformMetainfo != nil {
		return utils.MarshalJSON(u.LocalPlatformMetainfo, "", true)
	}

	return nil, errors.New("could not marshal union type PlatformMetainfo: all fields are null")
}
