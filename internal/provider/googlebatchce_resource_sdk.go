// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
	"github.com/seqeralabs/terraform-provider-seqera/internal/provider/typeconvert"
	tfTypes "github.com/seqeralabs/terraform-provider-seqera/internal/provider/types"
	"github.com/seqeralabs/terraform-provider-seqera/internal/sdk/models/operations"
	"github.com/seqeralabs/terraform-provider-seqera/internal/sdk/models/shared"
	"time"
)

func (r *GoogleBatchCEResourceModel) RefreshFromSharedCreateGoogleBatchCEResponse(ctx context.Context, resp *shared.CreateGoogleBatchCEResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.ComputeEnvID = types.StringPointerValue(resp.ComputeEnvID)
	}

	return diags
}

func (r *GoogleBatchCEResourceModel) RefreshFromSharedDescribeGoogleBatchCEResponse(ctx context.Context, resp *shared.DescribeGoogleBatchCEResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		diags.Append(r.RefreshFromSharedGoogleBatchCEComputeConfig(ctx, resp.ComputeEnv)...)

		if diags.HasError() {
			return diags
		}

	}

	return diags
}

func (r *GoogleBatchCEResourceModel) RefreshFromSharedGoogleBatchCEComputeConfig(ctx context.Context, resp *shared.GoogleBatchCEComputeConfig) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.Config.BootDiskSizeGb = types.Int32PointerValue(typeconvert.IntPointerToInt32Pointer(resp.Config.BootDiskSizeGb))
		r.Config.ComputeJobsInstanceTemplate = types.StringPointerValue(resp.Config.ComputeJobsInstanceTemplate)
		r.Config.EnableFusion = types.BoolPointerValue(resp.Config.EnableFusion)
		r.Config.EnableWave = types.BoolPointerValue(resp.Config.EnableWave)
		r.Config.Environment = []tfTypes.ConfigEnvVariable{}

		for _, environmentItem := range resp.Config.Environment {
			var environment tfTypes.ConfigEnvVariable

			environment.Compute = types.BoolPointerValue(environmentItem.Compute)
			environment.Head = types.BoolPointerValue(environmentItem.Head)
			environment.Name = types.StringPointerValue(environmentItem.Name)
			environment.Value = types.StringPointerValue(environmentItem.Value)

			r.Config.Environment = append(r.Config.Environment, environment)
		}
		r.Config.HeadJobCpus = types.Int32PointerValue(typeconvert.IntPointerToInt32Pointer(resp.Config.HeadJobCpus))
		r.Config.HeadJobInstanceTemplate = types.StringPointerValue(resp.Config.HeadJobInstanceTemplate)
		r.Config.HeadJobMemoryMb = types.Int32PointerValue(typeconvert.IntPointerToInt32Pointer(resp.Config.HeadJobMemoryMb))
		if len(resp.Config.Labels) > 0 {
			r.Config.Labels = make(map[string]types.String, len(resp.Config.Labels))
			for key, value := range resp.Config.Labels {
				r.Config.Labels[key] = types.StringValue(value)
			}
		}
		r.Config.Location = types.StringValue(resp.Config.Location)
		r.Config.Network = types.StringPointerValue(resp.Config.Network)
		r.Config.NextflowConfig = types.StringPointerValue(resp.Config.NextflowConfig)
		r.Config.PostRunScript = types.StringPointerValue(resp.Config.PostRunScript)
		r.Config.PreRunScript = types.StringPointerValue(resp.Config.PreRunScript)
		r.Config.ServiceAccount = types.StringPointerValue(resp.Config.ServiceAccount)
		r.Config.Spot = types.BoolPointerValue(resp.Config.Spot)
		r.Config.Subnetwork = types.StringPointerValue(resp.Config.Subnetwork)
		r.Config.UsePrivateAddress = types.BoolPointerValue(resp.Config.UsePrivateAddress)
		r.Config.WorkDir = types.StringPointerValue(resp.Config.WorkDir)
		r.CredentialsID = types.StringValue(resp.CredentialsID)
		r.DateCreated = types.StringPointerValue(typeconvert.TimePointerToStringPointer(resp.DateCreated))
		r.Deleted = types.BoolPointerValue(resp.Deleted)
		r.Description = types.StringPointerValue(resp.Description)
		r.ID = types.StringPointerValue(resp.ID)
		r.LastUpdated = types.StringPointerValue(typeconvert.TimePointerToStringPointer(resp.LastUpdated))
		r.LastUsed = types.StringPointerValue(typeconvert.TimePointerToStringPointer(resp.LastUsed))
		r.Name = types.StringValue(resp.Name)
		r.OrgID = types.Int64PointerValue(resp.OrgID)
		if resp.Platform != nil {
			r.Platform = types.StringValue(string(*resp.Platform))
		} else {
			r.Platform = types.StringNull()
		}
		r.Status = types.StringPointerValue(resp.Status)
		r.WorkspaceID = types.Int64PointerValue(resp.WorkspaceID)
	}

	return diags
}

func (r *GoogleBatchCEResourceModel) ToOperationsCreateGoogleBatchCERequest(ctx context.Context) (*operations.CreateGoogleBatchCERequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var workspaceID int64
	workspaceID = r.WorkspaceID.ValueInt64()

	createGoogleBatchCERequest, createGoogleBatchCERequestDiags := r.ToSharedCreateGoogleBatchCERequest(ctx)
	diags.Append(createGoogleBatchCERequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.CreateGoogleBatchCERequest{
		WorkspaceID:                workspaceID,
		CreateGoogleBatchCERequest: *createGoogleBatchCERequest,
	}

	return &out, diags
}

func (r *GoogleBatchCEResourceModel) ToOperationsDeleteGoogleBatchCERequest(ctx context.Context) (*operations.DeleteGoogleBatchCERequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var computeEnvID string
	computeEnvID = r.ComputeEnvID.ValueString()

	workspaceID := new(int64)
	if !r.WorkspaceID.IsUnknown() && !r.WorkspaceID.IsNull() {
		*workspaceID = r.WorkspaceID.ValueInt64()
	} else {
		workspaceID = nil
	}
	out := operations.DeleteGoogleBatchCERequest{
		ComputeEnvID: computeEnvID,
		WorkspaceID:  workspaceID,
	}

	return &out, diags
}

func (r *GoogleBatchCEResourceModel) ToOperationsDescribeGoogleBatchCERequest(ctx context.Context) (*operations.DescribeGoogleBatchCERequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var computeEnvID string
	computeEnvID = r.ComputeEnvID.ValueString()

	var workspaceID int64
	workspaceID = r.WorkspaceID.ValueInt64()

	out := operations.DescribeGoogleBatchCERequest{
		ComputeEnvID: computeEnvID,
		WorkspaceID:  workspaceID,
	}

	return &out, diags
}

func (r *GoogleBatchCEResourceModel) ToSharedCreateGoogleBatchCERequest(ctx context.Context) (*shared.CreateGoogleBatchCERequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	computeEnv, computeEnvDiags := r.ToSharedGoogleBatchCEComputeConfigInput(ctx)
	diags.Append(computeEnvDiags...)

	if diags.HasError() {
		return nil, diags
	}

	labelIds := make([]int64, 0, len(r.LabelIds))
	for labelIdsIndex := range r.LabelIds {
		labelIds = append(labelIds, r.LabelIds[labelIdsIndex].ValueInt64())
	}
	out := shared.CreateGoogleBatchCERequest{
		ComputeEnv: computeEnv,
		LabelIds:   labelIds,
	}

	return &out, diags
}

func (r *GoogleBatchCEResourceModel) ToSharedGoogleBatchCEComputeConfigInput(ctx context.Context) (*shared.GoogleBatchCEComputeConfigInput, diag.Diagnostics) {
	var diags diag.Diagnostics

	var credentialsID string
	credentialsID = r.CredentialsID.ValueString()

	workspaceID := new(int64)
	if !r.WorkspaceID.IsUnknown() && !r.WorkspaceID.IsNull() {
		*workspaceID = r.WorkspaceID.ValueInt64()
	} else {
		workspaceID = nil
	}
	id := new(string)
	if !r.ID.IsUnknown() && !r.ID.IsNull() {
		*id = r.ID.ValueString()
	} else {
		id = nil
	}
	var name string
	name = r.Name.ValueString()

	description := new(string)
	if !r.Description.IsUnknown() && !r.Description.IsNull() {
		*description = r.Description.ValueString()
	} else {
		description = nil
	}
	platform := new(shared.GoogleBatchCEComputeConfigPlatform)
	if !r.Platform.IsUnknown() && !r.Platform.IsNull() {
		*platform = shared.GoogleBatchCEComputeConfigPlatform(r.Platform.ValueString())
	} else {
		platform = nil
	}
	status := new(string)
	if !r.Status.IsUnknown() && !r.Status.IsNull() {
		*status = r.Status.ValueString()
	} else {
		status = nil
	}
	dateCreated := new(time.Time)
	if !r.DateCreated.IsUnknown() && !r.DateCreated.IsNull() {
		*dateCreated, _ = time.Parse(time.RFC3339Nano, r.DateCreated.ValueString())
	} else {
		dateCreated = nil
	}
	lastUpdated := new(time.Time)
	if !r.LastUpdated.IsUnknown() && !r.LastUpdated.IsNull() {
		*lastUpdated, _ = time.Parse(time.RFC3339Nano, r.LastUpdated.ValueString())
	} else {
		lastUpdated = nil
	}
	lastUsed := new(time.Time)
	if !r.LastUsed.IsUnknown() && !r.LastUsed.IsNull() {
		*lastUsed, _ = time.Parse(time.RFC3339Nano, r.LastUsed.ValueString())
	} else {
		lastUsed = nil
	}
	deleted := new(bool)
	if !r.Deleted.IsUnknown() && !r.Deleted.IsNull() {
		*deleted = r.Deleted.ValueBool()
	} else {
		deleted = nil
	}
	workDir := new(string)
	if !r.Config.WorkDir.IsUnknown() && !r.Config.WorkDir.IsNull() {
		*workDir = r.Config.WorkDir.ValueString()
	} else {
		workDir = nil
	}
	preRunScript := new(string)
	if !r.Config.PreRunScript.IsUnknown() && !r.Config.PreRunScript.IsNull() {
		*preRunScript = r.Config.PreRunScript.ValueString()
	} else {
		preRunScript = nil
	}
	postRunScript := new(string)
	if !r.Config.PostRunScript.IsUnknown() && !r.Config.PostRunScript.IsNull() {
		*postRunScript = r.Config.PostRunScript.ValueString()
	} else {
		postRunScript = nil
	}
	environment := make([]shared.ConfigEnvVariable, 0, len(r.Config.Environment))
	for environmentIndex := range r.Config.Environment {
		name1 := new(string)
		if !r.Config.Environment[environmentIndex].Name.IsUnknown() && !r.Config.Environment[environmentIndex].Name.IsNull() {
			*name1 = r.Config.Environment[environmentIndex].Name.ValueString()
		} else {
			name1 = nil
		}
		value := new(string)
		if !r.Config.Environment[environmentIndex].Value.IsUnknown() && !r.Config.Environment[environmentIndex].Value.IsNull() {
			*value = r.Config.Environment[environmentIndex].Value.ValueString()
		} else {
			value = nil
		}
		head := new(bool)
		if !r.Config.Environment[environmentIndex].Head.IsUnknown() && !r.Config.Environment[environmentIndex].Head.IsNull() {
			*head = r.Config.Environment[environmentIndex].Head.ValueBool()
		} else {
			head = nil
		}
		compute := new(bool)
		if !r.Config.Environment[environmentIndex].Compute.IsUnknown() && !r.Config.Environment[environmentIndex].Compute.IsNull() {
			*compute = r.Config.Environment[environmentIndex].Compute.ValueBool()
		} else {
			compute = nil
		}
		environment = append(environment, shared.ConfigEnvVariable{
			Name:    name1,
			Value:   value,
			Head:    head,
			Compute: compute,
		})
	}
	nextflowConfig := new(string)
	if !r.Config.NextflowConfig.IsUnknown() && !r.Config.NextflowConfig.IsNull() {
		*nextflowConfig = r.Config.NextflowConfig.ValueString()
	} else {
		nextflowConfig = nil
	}
	var location string
	location = r.Config.Location.ValueString()

	spot := new(bool)
	if !r.Config.Spot.IsUnknown() && !r.Config.Spot.IsNull() {
		*spot = r.Config.Spot.ValueBool()
	} else {
		spot = nil
	}
	bootDiskSizeGb := new(int)
	if !r.Config.BootDiskSizeGb.IsUnknown() && !r.Config.BootDiskSizeGb.IsNull() {
		*bootDiskSizeGb = int(r.Config.BootDiskSizeGb.ValueInt32())
	} else {
		bootDiskSizeGb = nil
	}
	usePrivateAddress := new(bool)
	if !r.Config.UsePrivateAddress.IsUnknown() && !r.Config.UsePrivateAddress.IsNull() {
		*usePrivateAddress = r.Config.UsePrivateAddress.ValueBool()
	} else {
		usePrivateAddress = nil
	}
	labels := make(map[string]string)
	for labelsKey := range r.Config.Labels {
		var labelsInst string
		labelsInst = r.Config.Labels[labelsKey].ValueString()

		labels[labelsKey] = labelsInst
	}
	headJobCpus := new(int)
	if !r.Config.HeadJobCpus.IsUnknown() && !r.Config.HeadJobCpus.IsNull() {
		*headJobCpus = int(r.Config.HeadJobCpus.ValueInt32())
	} else {
		headJobCpus = nil
	}
	headJobMemoryMb := new(int)
	if !r.Config.HeadJobMemoryMb.IsUnknown() && !r.Config.HeadJobMemoryMb.IsNull() {
		*headJobMemoryMb = int(r.Config.HeadJobMemoryMb.ValueInt32())
	} else {
		headJobMemoryMb = nil
	}
	enableWave := new(bool)
	if !r.Config.EnableWave.IsUnknown() && !r.Config.EnableWave.IsNull() {
		*enableWave = r.Config.EnableWave.ValueBool()
	} else {
		enableWave = nil
	}
	enableFusion := new(bool)
	if !r.Config.EnableFusion.IsUnknown() && !r.Config.EnableFusion.IsNull() {
		*enableFusion = r.Config.EnableFusion.ValueBool()
	} else {
		enableFusion = nil
	}
	serviceAccount := new(string)
	if !r.Config.ServiceAccount.IsUnknown() && !r.Config.ServiceAccount.IsNull() {
		*serviceAccount = r.Config.ServiceAccount.ValueString()
	} else {
		serviceAccount = nil
	}
	network := new(string)
	if !r.Config.Network.IsUnknown() && !r.Config.Network.IsNull() {
		*network = r.Config.Network.ValueString()
	} else {
		network = nil
	}
	subnetwork := new(string)
	if !r.Config.Subnetwork.IsUnknown() && !r.Config.Subnetwork.IsNull() {
		*subnetwork = r.Config.Subnetwork.ValueString()
	} else {
		subnetwork = nil
	}
	headJobInstanceTemplate := new(string)
	if !r.Config.HeadJobInstanceTemplate.IsUnknown() && !r.Config.HeadJobInstanceTemplate.IsNull() {
		*headJobInstanceTemplate = r.Config.HeadJobInstanceTemplate.ValueString()
	} else {
		headJobInstanceTemplate = nil
	}
	computeJobsInstanceTemplate := new(string)
	if !r.Config.ComputeJobsInstanceTemplate.IsUnknown() && !r.Config.ComputeJobsInstanceTemplate.IsNull() {
		*computeJobsInstanceTemplate = r.Config.ComputeJobsInstanceTemplate.ValueString()
	} else {
		computeJobsInstanceTemplate = nil
	}
	config := shared.GoogleBatchConfig{
		WorkDir:                     workDir,
		PreRunScript:                preRunScript,
		PostRunScript:               postRunScript,
		Environment:                 environment,
		NextflowConfig:              nextflowConfig,
		Location:                    location,
		Spot:                        spot,
		BootDiskSizeGb:              bootDiskSizeGb,
		UsePrivateAddress:           usePrivateAddress,
		Labels:                      labels,
		HeadJobCpus:                 headJobCpus,
		HeadJobMemoryMb:             headJobMemoryMb,
		EnableWave:                  enableWave,
		EnableFusion:                enableFusion,
		ServiceAccount:              serviceAccount,
		Network:                     network,
		Subnetwork:                  subnetwork,
		HeadJobInstanceTemplate:     headJobInstanceTemplate,
		ComputeJobsInstanceTemplate: computeJobsInstanceTemplate,
	}
	out := shared.GoogleBatchCEComputeConfigInput{
		CredentialsID: credentialsID,
		WorkspaceID:   workspaceID,
		ID:            id,
		Name:          name,
		Description:   description,
		Platform:      platform,
		Status:        status,
		DateCreated:   dateCreated,
		LastUpdated:   lastUpdated,
		LastUsed:      lastUsed,
		Deleted:       deleted,
		Config:        config,
	}

	return &out, diags
}
