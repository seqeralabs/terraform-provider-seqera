overlay: 1.0.0
x-speakeasy-jsonpath: rfc9535
info:
  title: Actions Overlay
  version: 0.0.0
actions:
  # Remove readOnly from discriminator fields
  - target: $["components"]["schemas"]["Action.ConfigType"]["properties"]["discriminator"]["readOnly"]
    remove: true
  - target: $["components"]["schemas"]["Action.EventType"]["properties"]["discriminator"]["readOnly"]
    remove: true
  - target: $["components"]["schemas"]["Action.TowerActionConfig"]["properties"]["discriminator"]["readOnly"]
    remove: true
  - target: $["components"]["schemas"]["Action.TowerActionEvent"]["properties"]["discriminator"]["readOnly"]
    remove: true
  - target: $["components"]["schemas"]["GithubActionConfig"]["properties"]["discriminator"]["readOnly"]
    remove: true
  - target: $["components"]["schemas"]["GithubActionEvent"]["properties"]["discriminator"]["readOnly"]
    remove: true

  # Action entity operations
  - target: $.paths["/actions"].post
    update:
      x-speakeasy-entity-operation: Action#create
  - target: $.paths["/actions/{actionId}"].get
    update:
      x-speakeasy-entity-operation: Action#read
  - target: $.paths["/actions/{actionId}"].delete
    update:
      x-speakeasy-entity-operation: Action#delete
  - target: $.components.schemas.ActionResponseDto
    update:
      x-speakeasy-entity: Action
      x-speakeasy-entity-description: |
        This resource allows the management of pipeline actions. Actions enable event-based
        pipeline execution, such as triggering a pipeline launch with a GitHub webhook whenever
        the pipeline repository is updated.

        Seqera Platform currently offers support for native GitHub webhooks and a general
        Tower webhook that can be invoked programmatically.

  # Add descriptions to Launch fields used in Action
  - target: $.components.schemas.Launch.properties.postRunScript
    update:
      description: "Add a script that executes after all Nextflow processes have completed. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
  - target: $.components.schemas.Launch.properties.preRunScript
    update:
      description: "Add a script that executes in the nf-launch script prior to invoking Nextflow processes. See [Pre and post-run scripts](https://docs.seqera.io/platform-cloud/launch/advanced#pre-and-post-run-scripts)."
  - target: $.components.schemas.Launch.properties.workDir
    update:
      description: Working directory for workflow execution
  - target: $.components.schemas.Launch.properties.pipeline
    update:
      description: Repository URL or name of the Nextflow pipeline to execute
  - target: $.components.schemas.Launch.properties.configText
    update:
      description: Nextflow configuration content to customize the pipeline execution
  - target: $.components.schemas.Launch.properties.paramsText
    update:
      description: Pipeline parameters in JSON or YAML format
