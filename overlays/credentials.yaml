overlay: 1.0.0
x-speakeasy-jsonpath: rfc9535
info:
  title: Credentials Overlay
  version: 0.0.0
actions:
  # Credentials provider enum updates
  - target: $["components"]["schemas"]["Credentials"]["properties"]["provider"]["enum"][*]
    remove: true
  - target: $["components"]["schemas"]["Credentials"]["properties"]["provider"]["enum"]
    update:
      - aws
      - azure
      - google
      - github
      - gitlab
      - bitbucket
      - ssh
      - k8s
      - container-reg
      - tw-agent
      - codecommit
      - gitea
      - azurerepos
      - seqeracompute
  - target: $["components"]["schemas"]["Credentials"]["properties"]["provider"]
    update:
      x-speakeasy-name-override: providerType
  - target: $["components"]["schemas"]["Credentials"]["properties"]["lastUsed"]
    update:
      x-speakeasy-param-suppress-computed-diff: true
  - target: $["components"]["schemas"]["Credentials"]["properties"]["lastUpdated"]
    update:
      x-speakeasy-param-suppress-computed-diff: true
  - target: $["paths"]["/credentials"]["post"]["parameters"][0]
    update:
      required: true
  - target: $["components"]["schemas"]["Credentials"]["properties"]["provider"]
    update:
      x-speakeasy-plan-validators: CredentialsConfigValidator

  # Credentials entity operations
  - target: $.paths["/credentials"].post
    update:
      x-speakeasy-entity-operation: Credential#create
  - target: $.paths["/credentials/{credentialsId}"].get
    update:
      x-speakeasy-entity-operation: Credential#read
  - target: $.paths["/credentials/{credentialsId}"].put
    update:
      x-speakeasy-entity-operation: Credential#update
  - target: $.paths["/credentials/{credentialsId}"].delete
    update:
      x-speakeasy-entity-operation: Credential#delete

  # CredentialsDto annotations
  - target: $.components.schemas.CredentialsDto.properties.id
    update:
      x-speakeasy-name-override: credentialsId
      x-speakeasy-param-suppress-computed-diff: true
  - target: $.components.schemas.CredentialsDto.properties.description
    update:
      x-speakeasy-param-computed: false
  - target: $.components.schemas.CredentialsDto.properties.provider
    update:
      x-speakeasy-param-computed: false
  - target: $.components.schemas.CredentialsDto.properties.category
    update:
      x-speakeasy-param-computed: false
  - target: $.components.schemas.CredentialsDto.properties.deleted
    update:
      x-speakeasy-param-suppress-computed-diff: true
  - target: $.components.schemas.CredentialsDto.properties.lastUsed
    update:
      x-speakeasy-param-suppress-computed-diff: true
  - target: $.components.schemas.CredentialsDto.properties.lastUpdated
    update:
      x-speakeasy-param-suppress-computed-diff: true
  - target: $.components.schemas.CredentialsDto.properties.dateCreated
    update:
      x-speakeasy-param-readonly: true
  - target: $.components.schemas.CredentialsDto.properties.keys
    update:
      x-speakeasy-param-suppress-computed-diff: true
  - target: $.components.schemas.CredentialsDto.properties.baseUrl
    update:
      x-speakeasy-param-computed: true

  # Entity annotations
  - target: $.components.schemas.CredentialsDto
    update:
      x-speakeasy-entity: Credential

  # Updated Credentials schema annotations
  - target: $["components"]["schemas"]["Credentials"]["properties"]["id"]
    update:
      x-speakeasy-name-override: credentialsId
  - target: $["components"]["schemas"]["Credentials"]["properties"]["id"]
    update:
      x-speakeasy-param-suppress-computed-diff: true
  - target: $["components"]["schemas"]["Credentials"]["properties"]["description"]
    update:
      x-speakeasy-param-computed: false
  - target: $["components"]["schemas"]["Credentials"]["properties"]["provider"]["enum"][*]
    remove: true
  - target: $["components"]["schemas"]["Credentials"]["properties"]["provider"]["enum"]
    update:
      - aws
      - azure
      - azure_entra
      - google
      - github
      - gitlab
      - bitbucket
      - ssh
      - k8s
      - container-reg
      - tw-agent
      - codecommit
      - gitea
      - azurerepos
      - seqeracompute
  - target: $["components"]["schemas"]["Credentials"]["properties"]["baseUrl"]
    update:
      x-speakeasy-param-computed: false
  - target: $["components"]["schemas"]["Credentials"]["properties"]["category"]
    update:
      x-speakeasy-param-computed: false
  - target: $["components"]["schemas"]["Credentials"]["properties"]["deleted"]
    update:
      x-speakeasy-param-suppress-computed-diff: true
  - target: $["components"]["schemas"]["Credentials"]["properties"]["dateCreated"]
    update:
      x-speakeasy-param-suppress-computed-diff: true
  - target: $["components"]["schemas"]["Credentials"]
    update:
      x-speakeasy-entity: Credential
      x-speakeasy-entity-description: |
        Manage authentication credentials for various platforms and services.

        Credentials store authentication information for accessing cloud providers,
        Git repositories, container registries, and other external services
        within the Seqera Platform workflows.

  # Ignore discriminator fields in all security key schemas to prevent state changes
  - target: $.components.schemas.AgentSecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.AwsSecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.AzureReposSecurityKeys.allOf[1].properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.AzureSecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.BitBucketSecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.CodeCommitSecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.ContainerRegistryKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.GitHubSecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.GitLabSecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.GiteaSecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.GoogleSecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.K8sSecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.SSHSecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.SecurityKeys.properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true
  - target: $.components.schemas.SeqeraComputeSecurityKeys.allOf[1].properties.discriminator
    update:
      x-speakeasy-terraform-ignore: true

  # GoogleSecurityKeys plan validator
  - target: $["components"]["schemas"]["GoogleSecurityKeys"]
    update:
      x-speakeasy-plan-validators: GoogleKeysCrdentialValidator

  # SecurityKeys configuration
  - target: $["components"]["schemas"]["SecurityKeys"]
    update:
      x-speakeasy-param-computed: false

  # GitHub security keys password configuration
  - target: $["components"]["schemas"]["GitHubSecurityKeys"]["properties"]["password"]
    update:
      x-speakeasy-param-sensitive: true
  - target: $["components"]["schemas"]["GitHubSecurityKeys"]["properties"]["password"]
    update:
      x-speakeasy-param-suppress-computed-diff: true
