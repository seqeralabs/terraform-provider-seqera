---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "seqera_google_batch_ce Resource - terraform-provider-seqera"
subcategory: ""
description: |-
  Manage Google Batch compute environments in Seqera platform using this resource.
  Google Batch compute environments define the execution platform where a pipeline will run
  on Google Cloud infrastructure using the Google Batch service.
---

# seqera_google_batch_ce (Resource)

Manage Google Batch compute environments in Seqera platform using this resource.

Google Batch compute environments define the execution platform where a pipeline will run
on Google Cloud infrastructure using the Google Batch service.

## Example Usage

```terraform
# Basic Google Batch compute environment example
resource "seqera_google_batch_ce" "basic" {
  name           = "gcp-batch-basic"
  workspace_id   = 123
  credentials_id = seqera_google_credential.main.id
  description    = "Basic Google Batch compute environment"

  config = {
    location = "us-central1"
    work_dir = "gs://my-bucket/work"
  }
}

# Google Batch with Spot instances and Fusion
resource "seqera_google_batch_ce" "spot_fusion" {
  name           = "gcp-batch-spot"
  workspace_id   = 123
  credentials_id = seqera_google_credential.main.id
  description    = "Google Batch with Spot and Fusion"

  config = {
    location            = "us-central1"
    work_dir            = "gs://my-bucket/work"
    spot                = true
    boot_disk_size_gb   = 200
    use_private_address = false
    head_job_cpus       = 2
    head_job_memory_mb  = 4096
    enable_wave         = true
    enable_fusion       = true

    environment = []
  }
}

# Google Batch with custom configuration
resource "seqera_google_batch_ce" "advanced" {
  name           = "gcp-batch-advanced"
  workspace_id   = 123
  credentials_id = seqera_google_credential.main.id
  description    = "Advanced Google Batch configuration"

  config = {
    location          = "us-central1"
    work_dir          = "gs://my-bucket/work"
    boot_disk_size_gb = 100

    # Network configuration
    network             = "projects/my-project/global/networks/default"
    subnetwork          = "projects/my-project/regions/us-central1/subnetworks/default"
    use_private_address = false

    # Service account
    service_account = "nextflow-sa@my-project.iam.gserviceaccount.com"

    # Resource labels
    labels = {
      environment = "production"
      team        = "data-science"
    }

    # Head job configuration
    head_job_cpus      = 4
    head_job_memory_mb = 8192

    # Wave and Fusion
    enable_wave   = true
    enable_fusion = true

    # Scripts
    pre_run_script = <<-EOT
      #!/bin/bash
      echo "Setting up environment..."
    EOT

    post_run_script = <<-EOT
      #!/bin/bash
      echo "Cleaning up..."
    EOT

    # Environment variables
    environment = [
      {
        name    = "MY_VAR"
        value   = "my_value"
        head    = true
        compute = true
      }
    ]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `config` (Attributes) Requires replacement if changed. (see [below for nested schema](#nestedatt--config))
- `credentials_id` (String) Google Cloud credentials identifier. Requires replacement if changed.
- `name` (String) A unique name for this compute environment. Use only alphanumeric, dash, and underscore characters. Requires replacement if changed.
- `workspace_id` (Number) Workspace numeric identifier. Requires replacement if changed.

### Optional

- `description` (String) Optional description of the compute environment. Requires replacement if changed.
- `label_ids` (List of Number) Requires replacement if changed.
- `platform` (String) Google Cloud platform type (defaults to google-batch). Default: "google-batch"; must be "google-batch"; Requires replacement if changed.

### Read-Only

- `compute_env_id` (String) Compute environment string identifier
- `date_created` (String) Timestamp when the compute environment was created
- `deleted` (Boolean) Flag indicating if the compute environment has been deleted
- `id` (String) Unique identifier for the compute environment
- `last_updated` (String) Timestamp when the compute environment was last updated
- `last_used` (String) Timestamp when the compute environment was last used
- `org_id` (Number)
- `status` (String) Compute environment status

<a id="nestedatt--config"></a>
### Nested Schema for `config`

Required:

- `location` (String) Google Cloud region where the Batch compute environment will be created.
Examples: us-central1, us-east1, europe-west1, asia-southeast1
Requires replacement if changed.
- `work_dir` (String) Google Cloud Storage bucket path for Nextflow work directory where intermediate files will be stored.
Format: gs://bucket-name/path
Requires replacement if changed.

Optional:

- `boot_disk_size_gb` (Number) Size of the boot disk in GB for compute instances.
Minimum size depends on the base image used.
Requires replacement if changed.
- `compute_jobs_instance_template` (String) Custom instance template name for compute jobs.
Allows advanced configuration of worker compute resources.
Requires replacement if changed.
- `enable_fusion` (Boolean) Requires replacement if changed.
- `enable_wave` (Boolean) Enable Wave containers for this compute environment. Wave provides container provisioning
and augmentation capabilities for Nextflow workflows.

When enable_wave is true, enable_fusion must be explicitly set to either true or false.
Note: If Fusion2 is enabled, Wave must also be enabled.
Requires replacement if changed.
- `environment` (Attributes List) Requires replacement if changed. (see [below for nested schema](#nestedatt--config--environment))
- `head_job_cpus` (Number) Number of CPUs allocated for the head job (default: 1). Requires replacement if changed.
- `head_job_instance_template` (String) Custom instance template name for head job.
Allows advanced configuration of head job compute resources.
Requires replacement if changed.
- `head_job_memory_mb` (Number) Memory allocation for the head job in MB (default: 1024). Requires replacement if changed.
- `labels` (Map of String) Key-value labels to apply to compute resources.
Use for resource organization, cost tracking, and filtering.
Requires replacement if changed.
- `network` (String) VPC network name or URL for compute instances.
Format: projects/PROJECT_ID/global/networks/NETWORK_NAME
Or simply: NETWORK_NAME (for networks in the same project)
Requires replacement if changed.
- `nextflow_config` (String) Requires replacement if changed.
- `post_run_script` (String) Bash script to run after workflow execution completes.
Use for cleanup, archiving results, sending notifications, etc.
Requires replacement if changed.
- `pre_run_script` (String) Bash script to run before workflow execution begins.
Use for environment setup, loading modules, downloading reference data, etc.
Requires replacement if changed.
- `service_account` (String) Service account email to use for compute jobs.
This service account needs appropriate IAM permissions for GCS, logging, etc.
Format: service-account-name@project-id.iam.gserviceaccount.com
Requires replacement if changed.
- `spot` (Boolean) Enable Spot (preemptible) VM instances for compute jobs.
Spot instances are cost-effective but can be interrupted by Google Cloud.
Set to true to use Spot instances, false for standard instances.
Requires replacement if changed.
- `subnetwork` (String) VPC subnetwork name or URL for compute instances.
Must be in the same region as the compute environment.
Format: projects/PROJECT_ID/regions/REGION/subnetworks/SUBNETWORK_NAME
Or simply: SUBNETWORK_NAME
Requires replacement if changed.
- `use_private_address` (Boolean) Use only internal IP addresses for compute instances (no external IP).
Requires Cloud NAT or Private Google Access to be configured.
Set to true for enhanced security and to avoid external IP quotas.
Requires replacement if changed.

<a id="nestedatt--config--environment"></a>
### Nested Schema for `config.environment`

Optional:

- `compute` (Boolean) Whether this environment variable should be applied to compute/worker nodes.
At least one of 'head' or 'compute' must be set to true. Both can be true to target both environments.
Requires replacement if changed.
Default: false; Requires replacement if changed.
- `head` (Boolean) Whether this environment variable should be applied to the head/master node.
At least one of 'head' or 'compute' must be set to true. Both can be true to target both environments.
Requires replacement if changed.
Default: false; Requires replacement if changed.
- `name` (String) Requires replacement if changed.
- `value` (String) Requires replacement if changed.

## Import

Import is supported using the following syntax:

In Terraform v1.5.0 and later, the [`import` block](https://developer.hashicorp.com/terraform/language/import) can be used with the `id` attribute, for example:

```terraform
import {
  to = seqera_google_batch_ce.my_seqera_google_batch_ce
  id = jsonencode({
    compute_env_id = "..."
    workspace_id = 0
  })
}
```

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import seqera_google_batch_ce.my_seqera_google_batch_ce '{"compute_env_id": "...", "workspace_id": 0}'
```
