

resource "seqera_credential" "aws_credential" {

  name          = "test_credential"
  provider_type = "aws"
  workspace_id  = resource.seqera_workspace.my_workspace.id
  description   = "AWS credentials generated by terraform"    
  keys = {
    aws = {
      access_key      = var.access_key
      secret_key      = var.secret_key
      assume_role_arn = "arn:aws:iam::128997144437:role/TowerDevelopmentRole"  
    }
      
  }
  
}


# TODO: Export the below as TF_VARs for now, will pull from secrets manager later
#  export TF_VAR_secret_key="xxxx"
#  export TF_VAR_access_key="xxxxx
# 
variable "secret_key" {
  type        = string
  description = "AWS secret key for the credential"
  sensitive   = true
}

variable "access_key" {
  type        = string
  description = "AWS access key for the credential"
  sensitive   = true
  
}